(function(e){function t(t){for(var n,o,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=u;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0f96":function(e,t,r){"use strict";var n=r("1892"),a=r("8dd1"),s=r("2877"),o=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);t["default"]=o.exports},1892:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"home-page"},[r("router-link",{staticClass:"boards-btn",attrs:{to:"/board"}},[e._v("Go to boards :D")])],1)},a=[]},2307:function(e,t,r){e.exports=r.p+"img/bg6.9b705065.jpg"},"3c61":function(e,t,r){},"3edc":function(e,t){},"55b3":function(e,t,r){e.exports=r.p+"img/bg2.710006bb.jpg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:e.appStyle,attrs:{id:"app"}},[r("main-header",{attrs:{loggedinUserId:e.loggedinUser},on:{logout:e.logout}}),r("router-view")],1)},s=[],o=(r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"main-header",class:e.headerClass},[e.isHome?e._e():r("div",{staticClass:"main-nav flex"},[r("router-link",{attrs:{to:"/",exact:""}},[e._v("Home")]),r("router-link",{attrs:{to:"/board",exact:""}},[e._v("Boards")])],1),r("div",{staticClass:"logo flex"},[r("span",{on:{click:e.goToHome}},[e._v("Taskules")])]),r("div",{staticClass:"user-area flex"},[e.isGuest?[r("router-link",{attrs:{to:"/login"}},[e._v("Login")]),e._v(" | "),r("router-link",{attrs:{to:"/signup"}},[e._v("Signup")])]:r("span",{staticClass:"logout",on:{click:e.emitLogout}},[e._v("Logout")])],2)])}),i=[],u={props:{loggedinUserId:String},data:function(){return{isHome:!1}},computed:{isGuest:function(){return"guest"===this.loggedinUserId},headerClass:function(){return{home:this.isHome,app:!this.isHome}}},methods:{emitLogout:function(){this.$emit("logout")},goToHome:function(){"home"!==this.$route.name&&this.$router.push("/")}},watch:{"$route.path":function(){var e=this.$route.name;this.isHome="home"===e||"login"===e||"signup"===e}},created:function(){var e=this.$route.name;this.isHome="home"===e||"login"===e||"signup"===e}},c=u,d=r("2877"),l=Object(d["a"])(c,o,i,!1,null,null,null),p=l.exports,f={computed:{loggedinUser:function(){return this.$store.getters.loggedinUser._id},appStyle:function(){var e=this.$route.name,t="home"===e||"login"===e||"signup"===e;return{"padding-block-start":t?"150px":"0"}}},methods:{logout:function(){this.$store.dispatch("logout")}},created:function(){this.$store.dispatch("loadBoards")},components:{mainHeader:p}},m=f,h=Object(d["a"])(m,a,s,!1,null,null,null),g=h.exports,b=r("9483");Object(b["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var v=r("8c4f"),C=r("0f96"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.boardsForDisplay?r("section",{staticClass:"board-list flex f-center wrap"},[r("div",{staticClass:"create-board board-preview flex f-center"},[e.isAdding?r("form",{on:{submit:function(t){return t.preventDefault(),e.saveBoard(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newBoardTxt,expression:"newBoardTxt"}],attrs:{type:"text",placeholder:"Enter your board name"},domProps:{value:e.newBoardTxt},on:{input:function(t){t.target.composing||(e.newBoardTxt=t.target.value)}}}),r("button",[e._v("Create")])]):r("button",{on:{click:e.addBoard}},[e._v("+ CREATE BOARD")])]),e._l(e.boardsForDisplay,(function(t){return r("board-preview",{key:t._id,attrs:{boardDetails:t},on:{deleted:e.deleteBoard}})}))],2):e._e()},_=[],x=(r("4de4"),r("caad"),r("d81d"),r("2532"),r("96cf"),r("1da1")),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"board-preview flex f-center f-col",style:e.boardStyle,on:{click:e.goToBoard}},[r("h2",[e._v(e._s(e.boardDetails.title))]),r("button",{staticClass:"delete-btn",on:{click:function(t){return t.stopPropagation(),e.emitDelete(t)}}},[r("i",{staticClass:"fas fa-trash-alt"})])])},k=[],T={props:{boardDetails:Object},computed:{boardStyle:function(){return{background:this.boardDetails.style.background}}},methods:{goToBoard:function(){this.$router.push("/board/".concat(this.boardDetails._id))},emitDelete:function(){this.$emit("deleted",this.boardDetails._id)}}},$=T,P=Object(d["a"])($,w,k,!1,null,null,null),U=P.exports,S={data:function(){return{isAdding:!1,newBoardTxt:""}},computed:{boardsForDisplay:function(){var e=this,t=this.$store.getters.boards;return t?t.filter((function(t){var r=t.members.map((function(e){return e._id}));return!t.isPrivate||r.includes(e.loggedinUser._id)})):t},loggedinUser:function(){return this.$store.getters.loggedinUser}},methods:{deleteBoard:function(e){confirm("Are you sure you want to delete this board?")&&this.$store.dispatch("deleteBoard",e)},addBoard:function(){this.isAdding=!0},saveBoard:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.newBoardTxt){t.next=5;break}return t.next=3,e.$store.dispatch("createNewBoard",e.newBoardTxt);case 3:r=t.sent,e.$router.push("/board/".concat(r._id));case 5:e.newBoardTxt="",e.isAdding=!1;case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.$store.dispatch("loadBoards"),this.$store.dispatch("loadUsers")},components:{boardPreview:U}},D=S,B=Object(d["a"])(D,y,_,!1,null,null,null),E=B.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.board?r("section",{directives:[{name:"dragscroll",rawName:"v-dragscroll:firstchilddrag",arg:"firstchilddrag"}],staticClass:"board-details flex f-col",style:e.boardStyle},[r("div",{staticClass:"screen",on:{click:e.goBack}}),r("board-header",{attrs:{board:e.board,users:e.users,user:e.user},on:{updateTitle:e.updateBoardTitle,updateboardUsers:e.updateboardUsers,changeBgc:e.changeBgc,privacyChange:e.changePrivacy}}),r("div",{staticClass:"flex group-container"},[r("draggable",{directives:[{name:"dragscroll",rawName:"v-dragscroll:nochilddrag",arg:"nochilddrag"}],staticClass:"drag-area flex",attrs:{ghostClass:"ghost",chosenClass:"chosen",dragClass:"drag",list:e.board.groups,animation:200,group:"board",forceFallback:!0},on:{change:function(t){return e.updateBoard(e.board)}}},e._l(e.board.groups,(function(t){return r("group",{key:t.id,attrs:{"data-no-dragscroll":"",group:t,labels:e.board.labels},on:{close:e.closeDetails,newCard:e.addCard,change:e.updateGroup,delete:e.deleteGroup}})})),1),r("div",{staticClass:"add-group group flex f-center",on:{click:e.addGroup}},[e.isAddingGroup?r("form",{on:{submit:function(t){return t.preventDefault(),e.newGroup(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newGroupTitle,expression:"newGroupTitle"}],attrs:{type:"text",placeholder:"Enter list title"},domProps:{value:e.newGroupTitle},on:{input:function(t){t.target.composing||(e.newGroupTitle=t.target.value)}}}),r("div",{staticClass:"new-group-btns"},[r("button",[e._v("Save")]),r("button",{attrs:{type:"button"},on:{click:function(t){return t.stopPropagation(),e.closeAddGroup(t)}}},[e._v(" Cancel ")])])]):r("span",[e._v("+ Add another list")])])],1),e.isDetails?r("card-details",{on:{close:e.closeDetails,addCard:e.updateCard,deleteCard:e.deleteCard}}):e._e()],1):e._e()},j=[],M=(r("7db0"),r("c740"),r("4160"),r("a434"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.group?r("section",{staticClass:"group flex f-col"},[r("div",{staticClass:"group-header"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.group.title,expression:"group.title"}],staticClass:"title",attrs:{type:"text"},domProps:{value:e.group.title},on:{change:e.emitChange,input:function(t){t.target.composing||e.$set(e.group,"title",t.target.value)}}}),r("button",{on:{click:function(t){return e.toggleEdit()}}},[e._v("...")]),e.isEdit?r("div",{staticClass:"group-edit flex f-col"},[r("button",{on:{click:function(t){return e.emitDelete(e.group.id)}}},[e._v("Delete Group")])]):e._e()]),r("draggable",{staticClass:"drag-area",attrs:{ghostClass:"ghost",chosenClass:"chosen",dragClass:"drag",list:e.group.cards,group:"group",forceFallback:!0,emptyInsertThreshold:100},on:{change:function(t){return e.update(t)},start:function(t){e.isDrag=!0},end:function(t){e.isDrag=!1}}},[r("transition-group",{attrs:{type:"transition",name:e.isDrag?null:"flip-list"}},e._l(e.group.cards,(function(t,n){return r("card-preview",{key:t.id,attrs:{"data-id":n,card:t,labels:e.labels},nativeOn:{click:function(r){return e.openDetails(t.id)}}})})),1)],1),r("div",{staticClass:"add-card"},[e.isAdding?r("form",{on:{submit:function(t){return t.preventDefault(),e.saveCard(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newCardTxt,expression:"newCardTxt"}],ref:"card-title",attrs:{type:"text"},domProps:{value:e.newCardTxt},on:{input:function(t){t.target.composing||(e.newCardTxt=t.target.value)}}}),r("button",[e._v("Save")])]):e._e(),e.isAdding?e._e():r("button",{on:{click:e.addCard}},[e._v(" + "+e._s(e.addBtnTxt)+" ")])])],1):e._e()}),I=[],A=(r("99af"),r("b76a")),G=r.n(A),R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-preview flex f-col f-center"},[r("div",{staticClass:"card-header",style:e.headerStyle}),r("div",{staticClass:"card-info flex f-center f-col"},[e.labelsSelected.length?r("ul",{staticClass:"label-marks flex wrap f-center"},e._l(e.labelsSelected,(function(e){return r("li",{key:e,staticClass:"flex"},[r("div",{staticClass:"label",style:{backgroundColor:e}})])})),0):e._e(),e._v(" "+e._s(e.card.title)+" "),e.card.attachments&&e.card.attachments.length?r("div",{staticClass:"attachment"},[r("img",{attrs:{src:""+e.card.attachments[0].src}})]):e._e()]),r("div",{staticClass:"icons"},[e.card.dueDate?r("i",{staticClass:"far fa-clock"},[e._v(e._s(e.localTime))]):e._e(),e.card.description?r("i",{staticClass:"fas fa-align-left"}):e._e(),e.card.checklist?r("i",{staticClass:"fas fa-list"}):e._e(),e.card.attachments&&e.card.attachments.length?r("i",{staticClass:"fas fa-paperclip"}):e._e(),e.card.members&&e.card.members.length?e._l(e.card.members,(function(e){return r("div",{key:e._id},[r("avatar",{attrs:{size:25,username:e.username}})],1)})):e._e()],2)])},N=[],L=r("4a89"),H=r.n(L),J={props:{card:Object,labels:Array},data:function(){return{}},computed:{localTime:function(){return new Date(this.card.dueDate).toLocaleDateString()},headerStyle:function(){return{background:this.card.style.headerColor}},labelsSelected:function(){if(!this.card.labels)return[];var e=this.card.labels.map((function(e){return e.id})),t=this.labels.filter((function(t){return e.includes(t.id)}));return t.map((function(e){return e.color}))}},methods:{},created:function(){},components:{avatar:H.a}},F=J,z=Object(d["a"])(F,R,N,!1,null,null,null),q=z.exports,V={props:{group:Object,labels:Array},data:function(){return{isAdding:!1,newCardTxt:"",isEdit:!1,isDrag:!1}},computed:{addBtnTxt:function(){return this.group.cards.length?"Add another card":"Add a card"}},methods:{toggleEdit:function(){this.isEdit=!this.isEdit},addCard:function(){var e=this;this.isAdding=!0,setTimeout((function(){return e.$refs["card-title"].focus()}),0)},saveCard:function(){this.newCardTxt&&this.$emit("newCard",this.newCardTxt,this.group.id),this.newCardTxt="",this.isAdding=!1},openDetails:function(e){document.body.querySelector(".screen").style.display="block";var t=this.$route.params.boardId;this.$router.push("/board/".concat(t,"/card/").concat(e))},emitChange:function(){this.$emit("change",this.group)},emitDelete:function(e){this.$emit("delete",e)},update:function(){this.emitChange()}},components:{cardPreview:q,draggable:G.a}},W=V,K=Object(d["a"])(W,M,I,!1,null,null,null),Q=K.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.board?r("section",{staticClass:"board-header flex"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.boardTitle,expression:"boardTitle"}],ref:"myInput",attrs:{type:"text"},domProps:{value:e.boardTitle},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.emitTitleChange(t)},blur:e.emitTitleChange,input:function(t){t.target.composing||(e.boardTitle=t.target.value)}}}),r("el-select",{staticClass:"privacy",attrs:{"popper-class":"dropdown"},on:{change:e.emitPrivacyChange},model:{value:e.privacy,callback:function(t){e.privacy=t},expression:"privacy"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("div",{staticClass:"board-members flex"},[e._l(e.boardMembers,(function(e){return r("div",{key:e.id},[r("avatar",{attrs:{size:35,username:e.username}})],1)})),e.isAddUsers?e._e():r("span",{staticClass:"add-btn flex f-center",on:{click:e.addUsers}},[r("i",{staticClass:"fas fa-user-plus"})]),e.isAddUsers?r("add-users",{attrs:{allUsers:e.users,boardUsers:this.board.members},on:{closeUsers:e.closeUsers,updateUsers:e.updateUsers}}):e._e()],2),r("button",{staticClass:"menu-btn",on:{click:e.toggleMenu}},[e._v("Menu")]),e.isMenu?r("board-menu",{attrs:{board:e.board},on:{changeBgc:e.emitBgChange,close:e.closeMenu}}):e._e()],1):e._e()},Y=[],Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"add-users"},[r("h3",[e._v("Users")]),e._v(" "),r("button",{on:{click:e.onClose}},[e._v("x")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userSearch,expression:"userSearch"}],attrs:{type:"text",placeholder:"Serach members"},domProps:{value:e.userSearch},on:{keyup:e.filter,input:function(t){t.target.composing||(e.userSearch=t.target.value)}}}),r("ul",e._l(e.usersToShow,(function(t){return r("li",{key:t._id,staticClass:"flex"},[r("span",{staticClass:"board-user flex",on:{click:function(r){return e.toggleUser(t._id)}}},[r("avatar",{attrs:{size:35,username:t.username}}),r("span",[e._v(" "+e._s(t.username))])],1),e.isUser(t._id)?r("i",{staticClass:"fas fa-check"}):e._e()])})),0)])},ee=[],te=(r("45fc"),{props:{allUsers:Array,boardUsers:Array},data:function(){return{userSearch:null,filterTxt:""}},computed:{usersToShow:function(){var e=this;return console.log(this.allUsers),this.allUsers.filter((function(t){return t.username.toLowerCase().includes(e.filterTxt.toLowerCase())}))}},methods:{filter:function(){this.filterTxt=this.userSearch},toggleUser:function(e){this.$emit("updateUsers",e)},isUser:function(e){return this.boardUsers.some((function(t){return t._id===e}))},onClose:function(){this.$emit("closeUsers")}},components:{avatar:H.a}}),re=te,ne=Object(d["a"])(re,Z,ee,!1,null,null,null),ae=ne.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"board-menu flex f-col"},[r("i",{staticClass:"fas fa-times close-btn",on:{click:e.emitClose}}),r("h2",[e._v("Menu")]),r("hr"),r("div",{staticClass:"board-actions flex f-col"},[r("span",{on:{click:e.toggleBg}},[e._v("Change Background")]),e.isBg?r("div",{staticClass:"background flex f-center wrap"},[e._l(e.colors,(function(t,n){return r("div",{key:t,class:"bgc bgc-"+(n+1),on:{click:function(r){return e.emitChange(t)}}})})),e._l(e.srcs,(function(t,n){return r("div",{key:t},[r("img",{attrs:{src:t},on:{click:function(t){return e.emitChange(""+n)}}})])}))],2):e._e(),r("span",[e._v("Delete Board")]),r("hr")]),r("div",{staticClass:"activity"})])},oe=[],ie={props:{board:Object},data:function(){return{isBg:!1,colors:["rgb(46, 121, 186)","rgb(72, 171, 200)","rgb(106, 188, 114)","rgb(98, 149, 70)","rgb(132, 99, 154)","rgb(191, 98, 143)","rgb(164, 76, 56)","rgb(202, 146, 71)"],srcs:[r("fa43"),r("55b3"),r("5882"),r("7b78"),r("7387"),r("2307")]}},methods:{toggleBg:function(){this.isBg=!this.isBg},emitClose:function(){this.$emit("close")},emitChange:function(e){this.$emit("changeBgc",e)}},created:function(){}},ue=ie,ce=Object(d["a"])(ue,se,oe,!1,null,null,null),de=ce.exports,le={props:{board:Object,users:Array,user:Object},data:function(){return{boardTitle:null,isAddUsers:!1,isMenu:!1,options:"guest"!==this.user._id?[{value:"private",label:"Private"},{value:"public",label:"Public"}]:[{value:"public",label:"Public"}],privacy:null}},methods:{toggleMenu:function(){this.isMenu=!this.isMenu},addUsers:function(){console.log("Add member",this.users),this.isAddUsers=!0},closeUsers:function(){this.isAddUsers=!1},updateUsers:function(e){this.$emit("updateboardUsers",e)},emitTitleChange:function(){var e=this;this.$emit("updateTitle",this.boardTitle),setTimeout((function(){e.$refs.myInput.blur()}),0)},emitBgChange:function(e){this.$emit("changeBgc",e)},closeMenu:function(){this.isMenu=!1},emitPrivacyChange:function(){this.$emit("privacyChange",this.privacy)}},computed:{boardMembers:function(){return this.board.members},isPrivate:function(){return this.board.isPrivate?"Private":"Public"}},created:function(){this.boardTitle=this.board.title,console.log(this.boardTitle,this.board.title),this.privacy=this.isPrivate},destroyed:function(){console.log(this.boardTitle)},components:{avatar:H.a,addUsers:ae,boardMenu:de}},pe=le,fe=Object(d["a"])(pe,X,Y,!1,null,null,null),me=fe.exports,he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.card?r("section",{staticClass:"card-details flex f-col",on:{click:function(t){return t.stopPropagation(),e.closePopup(t)}}},[r("div",{staticClass:"card-header flex",style:e.headerStyle},[r("button",{staticClass:"cancel-btn",on:{click:function(t){return t.stopPropagation(),e.emitClose(t)}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"card-main-container flex"},[r("div",{staticClass:"card-info"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.card.title,expression:"card.title"}],staticClass:"title",attrs:{type:"text"},domProps:{value:e.card.title},on:{blur:e.updateBoard,input:function(t){t.target.composing||e.$set(e.card,"title",t.target.value)}}}),r("section",{staticClass:"add-to-card flex wrap"},[e.card.members&&e.card.members.length?r("div",{staticClass:"f-col card-members"},[r("h3",[e._v("Members")]),r("div",{staticClass:"flex"},[e._l(e.card.members,(function(e){return r("span",{key:e._id},[r("avatar",{attrs:{size:32,username:e.username}})],1)})),r("span",{on:{click:function(t){return t.stopPropagation(),e.onAddMembers(t)}}},[r("avatar",{staticClass:"add-member",attrs:{size:35,username:"+","background-color":"#E2E4E9",color:"rgb(94, 108, 132)"}})],1)],2)]):e._e(),e.labelsSelected().length?r("div",{staticClass:"label-marks f-col"},[r("h3",[e._v("Labels")]),r("div",{staticClass:"label-container flex wrap"},e._l(e.labelsSelected(),(function(t){return r("div",{key:t.id,staticClass:"label flex f-center",style:{backgroundColor:t.color}},[r("span",[e._v(e._s(t.title))])])})),0)]):e._e(),e.card.dueDate||e.dueDate?r("div",{staticClass:"due-date"},[r("h3",{on:{click:function(t){return t.stopPropagation(),e.setDate(t)}}},[e._v("Due Date")]),e.card.dueDate?r("span",[r("check-box",{attrs:{isDone:e.card.isDone}}),e._v(e._s(e.localTime)+" ")],1):e._e(),e.dueDate?r("date-picker",{ref:"date-picker",staticClass:"date-picker",attrs:{slot:"date-picker",dueDate:e.card.dueDate},on:{setDate:e.setNewDate},slot:"date-picker"}):e._e()],1):e._e()]),r("h2",[e._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.card.description,expression:"card.description"}],staticClass:"desc",attrs:{resize:"none",cols:"50",rows:"5",type:"text",placeholder:"Add a more detailed description..."},domProps:{value:e.card.description},on:{input:function(t){t.target.composing||e.$set(e.card,"description",t.target.value)}}}),r("div",{staticClass:"btns flex"}),e.isPopUp?r("pop-up",{on:{closePopup:e.closePopup}},[e.move?r("card-move",{attrs:{groups:e.board.groups,group:e.getCurrGroup,currPosition:e.getCurrPosition},on:{moveCard:e.moveCard}}):e._e(),e.isAddMembers?r("add-members",{attrs:{cardMembers:e.cardMembers(),boardMembers:e.boardMembers},on:{updateMembers:e.updateMembers}}):e._e(),e.board?[e.labels?r("card-labels",{attrs:{card:e.card,boardLabels:e.board.labels},on:{updateCard:e.updateCard,updateLabelTitle:e.updateLabelTitle}}):e._e()]:e._e(),e.cover?r("card-cover",{attrs:{color:e.card.style.headerColor},on:{colorChange:e.updateCover}}):e._e()],2):e._e(),r("card-attachments",{attrs:{attachments:e.attachments},on:{updateAttachments:e.updateAttachments}}),e.card?r("card-activity",{attrs:{activities:e.card.activities,user:e.loggedInUser,card:e.card}}):e._e()],1),r("div",{staticClass:"actions flex f-col"},[r("h3",[e._v("Add to card")]),r("button",{on:{click:function(t){return t.stopPropagation(),e.onAddMembers(t)}}},[e._v("Members")]),r("button",{on:{click:function(t){return t.stopPropagation(),e.openLabels(t)}}},[e._v("Labels")]),r("button",[e._v("Checklist")]),e._m(0),r("input",{staticClass:"upload",attrs:{type:"file",name:"uploader",id:"uploader"},on:{change:e.onUpload}}),r("div",[r("button",{on:{click:function(t){return t.stopPropagation(),e.setDate(t)}}},[e._v("Set Date")]),e.card.dueDate?r("button",{on:{click:function(t){return t.stopPropagation(),e.removeDate(t)}}},[e._v(" Remove Date ")]):e._e()]),r("button",{staticClass:"cover-btn",on:{click:function(t){return t.stopPropagation(),e.openCoverPicker(t)}}},[e._v(" Cover "),r("el-color-picker",{ref:"color-picker",staticClass:"color-picker",attrs:{"popper-class":"color-dropdown",size:"mini"},on:{change:e.updateCover},model:{value:e.card.style.headerColor,callback:function(t){e.$set(e.card.style,"headerColor",t)},expression:"card.style.headerColor"}})],1),r("button",{on:{click:e.cloneCard}},[e._v("Copy")]),r("button",{staticClass:"dlt-btn",on:{click:function(t){return t.stopPropagation(),e.deleteCard(t)}}},[e._v(" Delete Card ")]),r("button",{staticClass:"move-btn",on:{click:function(t){return t.stopPropagation(),e.emitMove(t)}}},[e._v("Move")])])])]):e._e()},ge=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",[r("label",{staticClass:"upload-btn",attrs:{for:"uploader"}},[e._v(" Attachment ")])])}],be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-checkbox",{on:{change:e.toggleDone},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})},ve=[],Ce={props:{isDone:Boolean},data:function(){return{checked:!0}},methods:{toggleDone:function(){return this.checked}}},ye=Ce,_e=Object(d["a"])(ye,be,ve,!1,null,null,null),xe=_e.exports,we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"pop-up"},[r("button",{on:{click:e.emitClose}},[e._v("x")]),e._t("card-move"),e._t("date-picker"),e._t("add-members"),e._t("card-cover"),e._t("default")],2)},ke=[],Te={methods:{emitClose:function(){this.$emit("closePopup")}}},$e=Te,Pe=Object(d["a"])($e,we,ke,!1,null,null,null),Ue=Pe.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-activity"},[r("h2",[e._v("activities:")]),r("button",[e._v("Show Details")]),r("avatar",{attrs:{username:"user.username"}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.msg.txt,expression:"msg.txt"}],attrs:{type:"text",placeholder:"Write a comment..."},domProps:{value:e.msg.txt},on:{keydown:e.typing,input:function(t){t.target.composing||e.$set(e.msg,"txt",t.target.value)}}}),r("button",{on:{click:e.sendMsg}},[e._v("Send")]),r("span",[e._v(e._s(e.chat))]),e.activities&&e.activities.length?e._l(e.activities,(function(e){return r("activity-preview",{key:e.id,attrs:{activity:e}})})):e._e()],2)},De=[],Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"activity-preview"},[r("avatar",{attrs:{username:e.username}}),r("h2",[e._v(e._s(e.username)+" "+e._s(e.activity.txt))])],1)},Ee=[],Oe={computed:{username:function(){return this.activity.byMember.username}},props:{activity:Object},components:{avatar:H.a}},je=Oe,Me=Object(d["a"])(je,Be,Ee,!1,null,null,null),Ie=Me.exports,Ae=r("8e27"),Ge=r.n(Ae),Re="/",Ne=Ge()("localhost:3030"),Le={setup:He,terminate:Je,on:Fe,off:ze,emit:qe};function He(){Ne=Ge()(Re)}function Je(){Ne=null}function Fe(e,t){Ne.on(e,t)}function ze(e,t){Ne.off(e,t)}function qe(e,t){Ne.emit(e,t)}var Ve={props:{activities:Array,user:Object,card:Object},data:function(){return{msg:{from:this.user.username,txt:""},chat:[],userTyping:null,timeOutTyping:null}},computed:{},methods:{sendMsg:function(){Le.emit("chat-newMsg",this.msg),this.msg.txt=""},addMsg:function(e){this.userTyping=null,this.chat=e,console.log(this.chat,"chat")},typing:function(){Le.emit("typing",this.msg.from)},setUserTyping:function(e){var t=this;this.userTyping=e,this.timeOutTyping&&clearTimeout(this.timeOutTyping),this.timeOutTyping=setTimeout((function(){t.userTyping=null}),1500)}},created:function(){var e=this;console.log("running sockets"),Le.setup(),Le.emit("card-topic",this.card.id),Le.on("chat-history",(function(t){return e.chat=t})),Le.on("chat-addMsg",this.addMsg),Le.on("user-typing",this.setUserTyping)},destroyed:function(){console.log("destroy"),Le.off("chat-addMsg",this.addMsg),Le.terminate()},components:{activityPreview:Ie,avatar:H.a}},We=Ve,Ke=Object(d["a"])(We,Se,De,!1,null,null,null),Qe=Ke.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.attachmentsToShow&&e.attachmentsToShow.length?r("section",{staticClass:"attachments"},[r("ul",e._l(e.attachmentsToShow,(function(t,n){return r("li",{key:n,staticClass:"attachment-card"},[r("img",{attrs:{src:t.src}}),e._v(" "+e._s(t.name)+" "),r("button",{on:{click:function(r){return e.emitDelete(t.id)}}},[e._v("Delete")])])})),0)]):e._e()},Ye=[],Ze=r("53ca"),et={makeId:tt,getRandomInt:rt,deepCopy:nt};function tt(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function rt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function nt(e){var t,r,n;if("object"!==Object(Ze["a"])(e)||null===e)return e;for(n in t=Array.isArray(e)?[]:{},e)r=e[n],t[n]=nt(r);return t}var at={props:{attachments:Array},data:function(){return{isShowAll:!1}},computed:{attachmentsToShow:function(){return et.deepCopy(this.attachments)}},methods:{emitDelete:function(e){var t=this.attachmentsToShow,r=t.findIndex((function(t){return t.id===e}));-1!==r&&t.splice(r,1),this.$emit("updateAttachments",t)}}},st=at,ot=Object(d["a"])(st,Xe,Ye,!1,null,null,null),it=ot.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-move"},[r("h3",[e._v("Move Card")]),r("h3",[e._v("Select Destenation")]),r("div",[r("select-list",{attrs:{groups:e.groups,title:e.group.title},on:{changeCardGroup:e.changeCardGroup}}),r("select-position",{attrs:{cards:e.getCards,diff:e.getDiff,currPosition:e.getCurrPosition},on:{changeCardPosition:e.changeCardPosition}}),r("button",{on:{click:function(t){return t.stopPropagation(),e.emitMove(t)}}},[e._v("Move")])],1)])},ct=[],dt=(r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{attrs:{placeholder:e.title},on:{change:e.changeGroup},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return r("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)}),lt=[],pt={props:{groups:Array,title:String},data:function(){return{options:this.groups,value:""}},methods:{changeGroup:function(){this.$emit("changeCardGroup",this.value)}}},ft=pt,mt=Object(d["a"])(ft,dt,lt,!1,null,null,null),ht=mt.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{attrs:{placeholder:+e.currPosition+e.diff+""},on:{change:e.changePosition},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.cards.length+e.diff,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)},bt=[],vt={props:{cards:Array,currPosition:String,diff:Number},data:function(){return{value:""}},methods:{changePosition:function(){this.$emit("changeCardPosition",this.value)}}},Ct=vt,yt=Object(d["a"])(Ct,gt,bt,!1,null,null,null),_t=yt.exports,xt={props:{groups:Array,group:Object,currPosition:Number},data:function(){return{newCardGroupId:this.group.id,newCardPosition:null}},computed:{getCards:function(){var e=this,t=this.groups.find((function(t){return t.id===e.newCardGroupId}));return t.cards},getDiff:function(){return console.log(this.newCardGroupId===this.group.id),this.newCardGroupId===this.group.id?0:1},getCurrPosition:function(){var e=this;if(this.newCardGroupId){var t=this.groups.find((function(t){return t.id===e.newCardGroupId}));return t.cards.length+""}return this.currPosition+""}},methods:{changeCardGroup:function(e){this.newCardGroupId=e},changeCardPosition:function(e){this.newCardPosition=e},emitMove:function(){console.log(this.newCardGroupId,this.newCardPosition);var e={startPos:this.currPosition-1,endPos:this.newCardPosition?this.newCardPosition-1:null,startGroup:this.group.id,endGroup:this.newCardGroupId};console.log(e),this.$emit("moveCard",e)}},components:{selectList:ht,selectPosition:_t}},wt=xt,kt=Object(d["a"])(wt,ut,ct,!1,null,null,null),Tt=kt.exports,$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-cover"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newColor,expression:"newColor"}],attrs:{type:"color"},domProps:{value:e.newColor},on:{change:e.emitColorChange,input:function(t){t.target.composing||(e.newColor=t.target.value)}}})])},Pt=[],Ut={props:{color:String},data:function(){return{newColor:""}},methods:{emitColorChange:function(){this.$emit("colorChange",this.newColor)}},created:function(){this.newColor=this.color}},St=Ut,Dt=Object(d["a"])(St,$t,Pt,!1,null,null,null),Bt=Dt.exports,Et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"block"},[r("el-date-picker",{ref:"date",attrs:{"default-value":e.defaultValue,type:"datetime",placeholder:"Select Due Date","default-time":"12:00:00","value-format":"timestamp","picker-options":e.pickerOptions},on:{change:e.setDate},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[e._v(" > ")])],1)},Ot=[],jt={props:{dueDate:Number},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()},shortcuts:[{text:"Tomorrow",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"In a week",onClick:function(e){var t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}}]},value1:""}},computed:{defaultValue:function(){return this.dueDate?this.dueDate:new Date}},methods:{setDate:function(){this.dueDate&&this.$emit("removeDate"),this.$refs.date._data.pickerVisible=!1,this.$emit("setDate",this.value1)}},mounted:function(){this.$refs.date._data.pickerVisible=!0}},Mt=jt,It=Object(d["a"])(Mt,Et,Ot,!1,null,null,null),At=It.exports,Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"card-label flex f-col f-center"},[r("h3",[e._v("Labels")]),r("ul",{staticClass:"label-list flex f-col"},[r("li",e._l(e.boardLabels,(function(t){return r("label-preview",{key:t.id,staticClass:"flex",attrs:{label:t,card:e.card},on:{updateCard:e.emitUpdateCard,updateLabelTitle:e.emitUpdateTitle}})})),1)])])},Rt=[],Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"label-preview"},[r("div",{staticClass:"label flex f-s-between",style:{backgroundColor:e.label.color},on:{click:function(t){return t.stopPropagation(),e.toggleLabel(t)}}},[e.isEdit?r("input",{directives:[{name:"model",rawName:"v-model",value:e.titleToEdit,expression:"titleToEdit"}],ref:"myInput",attrs:{type:"text"},domProps:{value:e.titleToEdit},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.updateTitle(t))},input:function(t){t.target.composing||(e.titleToEdit=t.target.value)}}}):r("span",[e._v(e._s(e.label.title))]),r("i",{class:e.isSelect()})]),r("button",{on:{click:function(t){return t.stopPropagation(),e.focusInput(t)}}},[r("i",{staticClass:"fal fa-pen"})])])},Lt=[],Ht={props:{label:Object,card:Object},data:function(){return{titleToEdit:this.label.title,isEdit:!1}},computed:{cardToEdit:function(){return et.deepCopy(this.card)}},methods:{toggleLabel:function(){var e=this;this.card.labels||(this.card.labels=[]);var t=this.card.labels.findIndex((function(t){return t.id===e.label.id}));-1===t?this.card.labels.push({id:this.label.id}):this.card.labels.splice(t,1),this.$emit("updateCard",this.card)},isSelect:function(){if(this.card.labels){var e=this.card.labels.map((function(e){return e.id}));return e.includes(this.label.id)?"fas fa-check":""}},focusInput:function(){var e=this;this.isEdit=!0,setTimeout((function(){e.$refs.myInput.focus()}),0)},updateTitle:function(){this.isEdit=!1,this.$emit("updateLabelTitle",this.label.id,this.titleToEdit)}}},Jt=Ht,Ft=Object(d["a"])(Jt,Nt,Lt,!1,null,null,null),zt=Ft.exports,qt={props:{card:Object,boardLabels:Array},components:{labelPreview:zt},methods:{emitUpdateCard:function(e){this.$emit("updateCard",e)},emitUpdateTitle:function(e,t){this.$emit("updateLabelTitle",e,t)}}},Vt=qt,Wt=Object(d["a"])(Vt,Gt,Rt,!1,null,null,null),Kt=Wt.exports,Qt=r("bc3a"),Xt=r.n(Qt),Yt=function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="ivnbeged",n="denden",a="https://api.cloudinary.com/v1_1/".concat(n,"/image/upload"),s=new FormData,s.append("file",t.target.files[0]),s.append("upload_preset",r),e.prev=6,e.next=9,Xt.a.post(a,s);case 9:return o=e.sent,e.abrupt("return",o.data);case 13:e.prev=13,e.t0=e["catch"](6),console.error("ERROR!",e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),Zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"add-members",on:{click:function(e){e.stopPropagation()}}},[r("h3",[e._v("Members")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.memberSearch,expression:"memberSearch"}],attrs:{type:"text",placeholder:"Serach members"},domProps:{value:e.memberSearch},on:{keyup:e.filter,input:function(t){t.target.composing||(e.memberSearch=t.target.value)}}}),r("ul",e._l(e.membersToShow,(function(t){return r("li",{key:t._id,staticClass:"flex"},[r("span",{staticClass:"card-member flex",on:{click:function(r){return e.toggleMember(t._id)}}},[r("avatar",{attrs:{size:35,username:t.username}}),r("span",[e._v(" "+e._s(t.username)+" ")])],1),e.isMember(t._id)?r("i",{staticClass:"fas fa-check"}):e._e()])})),0)])},er=[],tr={props:{boardMembers:Array,cardMembers:Array},data:function(){return{memberSearch:null,filterTxt:""}},computed:{membersToShow:function(){var e=this;return this.boardMembers.filter((function(t){return t.username.toLowerCase().includes(e.filterTxt.toLowerCase())}))}},methods:{filter:function(){this.filterTxt=this.memberSearch},toggleMember:function(e){this.$emit("updateMembers",e)},isMember:function(e){return this.cardMembers.some((function(t){return t._id===e}))}},components:{avatar:H.a}},rr=tr,nr=Object(d["a"])(rr,Zt,er,!1,null,null,null),ar=nr.exports,sr={data:function(){return{card:null,isPopUp:!1,currPopUp:null,isLoading:!1}},computed:{loggedInUser:function(){return console.log(this.$store.getters.loggedinUser,"logged in user"),this.$store.getters.loggedinUser},localTime:function(){return new Date(this.card.dueDate).toLocaleDateString()},boardMembers:function(){return this.board.isPrivate?this.board.members:et.deepCopy(this.$store.getters.users)},board:function(){return et.deepCopy(this.$store.getters.currBoard)},getCurrGroup:function(){var e=this,t=this.board.groups.find((function(t){return t.cards.some((function(t){return t.id===e.card.id}))}));return t},getCurrPosition:function(){var e=this;return this.getCurrGroup.cards.findIndex((function(t){return t.id===e.card.id}))+1},move:function(){return"move"===this.currPopUp},dueDate:function(){return"duedate"===this.currPopUp},labels:function(){return"labels"===this.currPopUp},cover:function(){return"cover"===this.currPopUp},headerStyle:function(){return{background:this.card.style.headerColor}},attachments:function(){return this.card.attachments},isAddMembers:function(){return"member"===this.currPopUp}},methods:{updateBoard:function(){var e=this.board;this.$store.dispatch({type:"updateBoard",board:e})},updateAttachments:function(e){var t=et.deepCopy(this.card);t.attachments=e,this.updateCard(t)},emitClose:function(){this.$emit("close")},deleteCard:function(){var e=this,t=this.board;t.groups.forEach((function(t){var r=t.cards.findIndex((function(t){return t.id===e.card.id}));-1!==r&&t.cards.splice(r,1)})),this.$store.dispatch({type:"updateBoard",board:t}),this.emitClose()},emitMove:function(){this.currPopUp="move",this.isPopUp=!0},setDate:function(){this.currPopUp="duedate"},removeDate:function(){var e=et.deepCopy(this.card);e.dueDate=null,this.updateCard(e),this.card=e},setNewDate:function(e){var t=et.deepCopy(this.card);this.card.dueDate&&delete this.card.dueDate,t.dueDate=e,this.updateCard(t),this.card=t,this.closePopup()},openLabels:function(){this.currPopUp="labels",this.isPopUp=!0},updateLabelTitle:function(e,t){var r=this.board,n=r.labels.findIndex((function(t){return t.id===e}));-1!==n&&(r.labels[n].title=t),this.$store.dispatch({type:"updateBoard",board:r})},labelsSelected:function(){if(!this.card.labels)return[];var e=this.card.labels.map((function(e){return e.id}));return this.board.labels.filter((function(t){return e.includes(t.id)}))},moveCard:function(e){console.log(e),this.$store.commit({type:"updateCardStatus",status:e});var t=this.board;this.$store.dispatch({type:"updateBoard",board:t}),this.isPopUp=!1},onUpload:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isLoading=!0,r.next=3,Yt(e);case 3:n=r.sent,console.log("uploaded",n),a={id:et.makeId(),name:n.original_filename,format:n.format,src:n.url},t.card.attachments||(t.card.attachments=[]),s=et.deepCopy(t.card),s.attachments.push(a),console.log(t.card,"after adding"),t.isLoading=!1,t.updateCard(s),t.card=s;case 13:case"end":return r.stop()}}),r)})))()},openCoverPicker:function(){this.$refs["color-picker"]._data.showPicker=!0},updateCover:function(e){this.card.style.headerColor=e;var t=this.board;this.$store.dispatch({type:"updateBoard",board:t})},onAddMembers:function(){this.currPopUp="member",this.isPopUp=!0},updateMembers:function(e){var t=this.card,r=t.members.findIndex((function(t){return t._id===e}));if(-1===r){var n=this.$store.getters.users.find((function(t){return t._id===e}));console.log(n);var a={_id:n._id,username:n.username,imgUrl:n.imgUrl};t.members.push(a)}else t.members.splice(r,1);this.updateCard(t)},cardMembers:function(){return this.card.members||(this.card.members=[]),this.card.members},closePopup:function(){this.isPopUp=!1,this.currPopUp=""},updateCard:function(e){var t=this.board;t.groups.forEach((function(t){var r=t.cards.findIndex((function(t){return t.id===e.id}));-1!==r&&t.cards.splice(r,1,e)})),this.$store.dispatch({type:"updateBoard",board:t})},cloneCard:function(){var e=this,t=et.deepCopy(this.card);t.id=et.makeId();var r=this.board,n=r.groups.findIndex((function(t){return t.cards.some((function(t){return t.id===e.card.id}))}));-1!==n&&(console.log(r.groups[n].cards),r.groups[n].cards.push(t),console.log(r.groups[n].cards),this.$store.dispatch({type:"updateBoard",board:r}))}},created:function(){var e=this.$route.params.cardId;this.$store.commit({type:"setCurrCard",cardId:e}),this.card=this.$store.getters.currCard,this.$store.dispatch("loadUsers")},destroyed:function(){this.$store.commit({type:"updateCurrCard",card:null}),this.card=null},components:{cardActivity:Qe,cardMove:Tt,datePicker:At,addMembers:ar,cardAttachments:it,cardCover:Bt,cardLabels:Kt,avatar:H.a,popUp:Ue,checkBox:xe}},or=sr,ir=Object(d["a"])(or,he,ge,!1,null,null,null),ur=ir.exports,cr=r("fa43"),dr=r.n(cr),lr=r("55b3"),pr=r.n(lr),fr=r("5882"),mr=r.n(fr),hr=r("7b78"),gr=r.n(hr),br=r("7387"),vr=r.n(br),Cr=r("2307"),yr=r.n(Cr),_r={data:function(){return{isDetails:!1,isAddingGroup:!1,newGroupTitle:"",isScroll:!1,bgSrcs:[dr.a,pr.a,mr.a,gr.a,vr.a,yr.a]}},methods:{goBack:function(){document.body.querySelector(".screen").style.display="none",this.$router.go(-1)},closeDetails:function(){this.isDetails=!1,this.$router.push("/board/".concat(this.board._id)),document.body.querySelector(".screen").style.display="none"},addCard:function(e,t){var r=this.getEmptyCard();r.title=e,r.byMember=this.$store.getters.loggedinUser,r.createdAt=Date.now();var n=this.board,a=this.board.groups.find((function(e){return e.id===t}));a.cards.push(r),this.$store.dispatch({type:"updateBoard",board:n})},updateCard:function(e){var t=this.board;t.groups.forEach((function(t){var r=t.cards.findIndex((function(t){return t.id===e.id}));-1!==r&&t.cards.splice(r,1,e)})),this.$store.dispatch({type:"updateBoard",board:t})},deleteCard:function(e){var t=this.board;t.groups.forEach((function(t){var r=t.cards.findIndex((function(t){return t.id===e}));-1!==r&&t.cards.splice(r,1)})),this.$store.dispatch({type:"updateBoard",board:t})},updateGroup:function(e){var t=this.board,r=t.groups.findIndex((function(t){return t.id===e.id}));t.groups.splice(r,1,e),this.$store.dispatch({type:"updateBoard",board:t})},deleteGroup:function(e){var t=this.board,r=t.groups.findIndex((function(t){return t.id===e}));t.groups.splice(r,1),this.$store.dispatch({type:"updateBoard",board:t})},newGroup:function(){var e=this.getEmptyGroup();e.title=this.newGroupTitle;var t=this.board;t.groups.push(e),this.$store.dispatch({type:"updateBoard",board:t}),this.closeAddGroup()},getEmptyCard:function(){return this.$store.commit("setEmptyCard"),this.$store.getters.emptyCard},getEmptyGroup:function(){return this.$store.commit("setEmptyGroup"),this.$store.getters.emptyGroup},addGroup:function(){this.isAddingGroup=!0},closeAddGroup:function(){this.isAddingGroup=!1,this.newGroupTitle=""},updateBoard:function(e){this.$store.dispatch({type:"updateBoard",board:e})},updateboardUsers:function(e){console.log("update",e);var t=this.board,r=t.members.findIndex((function(t){return t._id===e}));if(-1===r){console.log();var n=this.$store.getters.users.find((function(t){return t._id===e})),a={_id:n._id,username:n.username,imgUrl:n.imgUrl};t.members.push(a)}else t.members.splice(r,1);this.$store.dispatch({type:"updateBoard",board:t})},updateBoardTitle:function(e){var t=this.board;t.title=e,this.updateBoard(t)},changeBgc:function(e){var t=et.deepCopy(this.board);e.includes("rgb")?t.style.background=e:t.style.background="url(".concat(this.bgSrcs[+e],")"),this.updateBoard(t)},changePrivacy:function(e){var t=et.deepCopy(this.board);t.isPrivate="private"===e,this.updateBoard(t)}},computed:{board:function(){return this.$store.getters.currBoard&&console.log(this.$store.getters.currBoard),et.deepCopy(this.$store.getters.currBoard)},users:function(){return this.$store.getters.users},user:function(){return this.$store.getters.loggedinUser},boardStyle:function(){return console.log(this.board.style.background),{background:"".concat(this.board.style.background)}}},watch:{"$route.params":function(){this.$route.params.cardId?this.isDetails=!0:this.isDetails=!1}},mounted:function(){var e=this;setTimeout((function(){e.$route.params.cardId&&(document.body.querySelector(".screen").style.display="block")}),500)},created:function(){this.$store.dispatch("loadUsers"),this.$route.params.cardId&&(this.isDetails=!0);var e=this.$route.params.boardId;this.$store.dispatch({type:"loadBoard",boardId:e})},destroyed:function(){this.$store.dispatch({type:"loadBoard",boardId:null})},components:{group:Q,boardHeader:me,cardDetails:ur,draggable:G.a}},xr=_r,wr=Object(d["a"])(xr,O,j,!1,null,null,null),kr=wr.exports,Tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"login"},[r("form",{staticClass:"flex f-col f-center",on:{submit:function(t){return t.preventDefault(),e.loginOrSignup(t)}}},[r("h2",[e._v(e._s(e.titleTxt)+":")]),r("h2",{staticClass:"red"},[e._v(e._s(e.msg))]),e.isSignup?r("input",{directives:[{name:"model",rawName:"v-model",value:e.userToEdit.username,expression:"userToEdit.username"}],attrs:{type:"text",placeholder:"Full name"},domProps:{value:e.userToEdit.username},on:{input:function(t){t.target.composing||e.$set(e.userToEdit,"username",t.target.value)}}}):e._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userToEdit.email,expression:"userToEdit.email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:e.userToEdit.email},on:{input:function(t){t.target.composing||e.$set(e.userToEdit,"email",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userToEdit.password,expression:"userToEdit.password"}],attrs:{type:"text",placeholder:"Password"},domProps:{value:e.userToEdit.password},on:{input:function(t){t.target.composing||e.$set(e.userToEdit,"password",t.target.value)}}}),r("button",[e._v(e._s(e.btnTxt))])]),e._v(" OR "),r("hr"),r("router-link",{attrs:{to:e.to}},[e._v(e._s(e.linkTxt))])],1)},$r=[],Pr=(r("ac1f"),r("1276"),{data:function(){return{userToEdit:{},isSignup:!1,msg:""}},computed:{titleTxt:function(){return this.isSignup?"Sign up for your account":"Log in to your account"},btnTxt:function(){return this.isSignup?"Sign up":"Continue"},linkTxt:function(){return this.isSignup?"Already have a Trililo account? Log in":"Sign up for an account"},to:function(){return this.isSignup?"/login":"/signup"}},methods:{getUserToEdit:function(){return{username:"Dadi Gamadi",email:"dadi@gamadi.com",password:"gAmadi123"}},loginOrSignup:function(){this.isSignup?this.signup():this.login()},login:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,delete e.userToEdit.username,t.next=4,e.$store.dispatch({type:"login",userCred:e.userToEdit});case 4:r=t.sent,r&&e.$router.push("/board"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.msg="Invalid email or password",e.$router.push("/login");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},signup:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userToEdit.username&&e.userToEdit.password&&e.userToEdit.email){t.next=3;break}return e.msg="Please enter full name, email and password!",t.abrupt("return");case 3:return t.next=5,e.$store.dispatch({type:"signup",userCred:JSON.parse(JSON.stringify(e.userToEdit))});case 5:r=t.sent,r&&e.$router.push("/board");case 7:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this.$route.path.split("/");"signup"===e[e.length-1]?this.isSignup=!0:this.isSignup=!1,this.userToEdit=this.getUserToEdit(),this.msg=""},watch:{"$route.path":function(){var e=this.$route.path.split("/");"signup"===e[e.length-1]?this.isSignup=!0:this.isSignup=!1,this.userToEdit=this.getUserToEdit()}}}),Ur=Pr,Sr=Object(d["a"])(Ur,Tr,$r,!1,null,null,null),Dr=Sr.exports;n["default"].use(v["a"]);var Br=[{path:"/",name:"home",component:C["default"]},{path:"/board",name:"board-list",component:E},{path:"/board/:boardId",name:"board-details",component:kr,children:[{path:"card/:cardId",name:"card-details",component:ur}]},{path:"/login",name:"login",component:Dr},{path:"/signup",name:"signup",component:Dr}],Er=new v["a"]({mode:"hash",routes:Br}),Or=Er,jr="/api/",Mr=Xt.a.create({withCredentials:!0}),Ir={get:function(e,t){return Ar(e,"GET",t)},post:function(e,t){return Ar(e,"POST",t)},put:function(e,t){return Ar(e,"PUT",t)},delete:function(e,t){return Ar(e,"DELETE",t)}};function Ar(e){return Gr.apply(this,arguments)}function Gr(){return Gr=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"get",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,Mr({url:"".concat(jr).concat(t),method:r,data:n});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e["catch"](2),401===e.t0.response.status&&Or.push("/"),console.log("Had issues ".concat(r,"ing to server"),e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])}))),Gr.apply(this,arguments)}var Rr={login:zr,logout:Kr,signup:Vr,getUsers:Lr,getById:Hr,remove:Jr,update:Fr,getGuest:Nr};function Nr(){return{_id:"guest",username:"Guest"+et.getRandomInt(1,1e3),email:"guest@guesti.com",password:"guest",imgUrl:"@/assets/imgs/guest.png"}}function Lr(){return Ir.get("user")}function Hr(e){return Ir.get("user/".concat(e))}function Jr(e){return Ir.delete("user/".concat(e))}function Fr(e){return Ir.put("user/".concat(e._id),e)}function zr(e){return qr.apply(this,arguments)}function qr(){return qr=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir.post("auth/login",t);case 2:return r=e.sent,e.abrupt("return",Xr(r));case 4:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Vr(e){return Wr.apply(this,arguments)}function Wr(){return Wr=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir.post("auth/signup",t);case 2:return r=e.sent,e.abrupt("return",Xr(r));case 4:case"end":return e.stop()}}),e)}))),Wr.apply(this,arguments)}function Kr(){return Qr.apply(this,arguments)}function Qr(){return Qr=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ir.post("auth/logout");case 2:sessionStorage.clear(),console.log("sessionStorage:",sessionStorage);case 4:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}function Xr(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}var Yr=Rr.getGuest();sessionStorage.user&&(Yr=JSON.parse(sessionStorage.user));var Zr={state:{loggedinUser:Yr,users:[]},getters:{users:function(e){return e.users},loggedinUser:function(e){console.log("getting user");var t=e.loggedinUser?e.loggedinUser:Rr.getGuest();return{_id:t._id,username:t.username,imgUrl:t.imgUrl}},isLogin:function(e){return e.isLogin}},mutations:{setUser:function(e,t){var r=t.user;e.loggedinUser=r},setUsers:function(e,t){var r=t.users;e.users=r},removeUser:function(e,t){var r=t.userId;e.users=e.users.filter((function(e){return e._id!==r}))}},actions:{login:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.userCred,r.next=4,Rr.login(a);case 4:return s=r.sent,n({type:"setUser",user:s}),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},signup:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.userCred,r.next=4,Rr.signup(a);case 4:return s=r.sent,n({type:"setUser",user:s}),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},logout:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Rr.logout();case 3:return r({type:"setUsers",users:[]}),r({type:"setUser",user:null}),t.abrupt("return");case 6:case"end":return t.stop()}}),t)})))()},loadUsers:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,Rr.getUsers();case 3:n=t.sent,r({type:"setUsers",users:n});case 5:case"end":return t.stop()}}),t)})))()},removeUser:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.userId,r.next=4,Rr.remove(a);case 4:n({type:"removeUser",userId:a});case 5:case"end":return r.stop()}}),r)})))()},updateUser:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.user,r.next=4,Rr.update(a);case 4:a=r.sent,n({type:"setUser",user:a});case 6:case"end":return r.stop()}}),r)})))()}}},en={query:tn,getById:rn,remove:nn,save:an,emptyBoard:sn,emptyGroup:on,emptyCard:un,emptyActivity:cn};function tn(){return Ir.get("board")}function rn(e){return Ir.get("board/".concat(e))}function nn(e){return Ir.delete("board/".concat(e))}function an(e){return e._id?Ir.put("board/".concat(e._id),e):Ir.post("board",e)}function sn(){return{title:"",byMember:{},isPrivate:!0,style:{background:"url(".concat(r("2307"),")")},members:[],groups:[{id:et.makeId()+"",title:"To Do",cards:[],style:{headerColor:""}},{id:et.makeId()+"",title:"In Progress",cards:[],style:{headerColor:""}},{id:et.makeId()+"",title:"Done",cards:[],style:{headerColor:""}}],activities:[],labels:[{id:"l101",color:"#61bd4f",title:"a"},{id:"l102",color:"#f2d600",title:"b"},{id:"l103",color:"#ff9f1a",title:"c"},{id:"l104",color:"#eb5a46",title:"d"},{id:"l105",color:"#c377e0",title:"e"},{id:"l106",color:"#0079bf",title:"f"}]}}function on(){return{id:et.makeId(),title:"",cards:[],style:{headerColor:"#ffffff"}}}function un(){return{id:et.makeId(),title:"",description:"",createdAt:"",byMember:"",style:{headerColor:"#d1d1d1"}}}function cn(){return{id:et.makeId(),txt:"",createdAt:"",byMember:{_id:"",username:"",imgUrl:""},card:{id:"",title:"",url:""}}}var dn={state:{boards:null,currBoard:null,emptyCard:null,emptyGroup:null},getters:{boards:function(e){return JSON.parse(JSON.stringify(e.boards))},currBoard:function(e){return e.currBoard},emptyGroup:function(e){return e.emptyGroup}},mutations:{setBoards:function(e,t){e.boards=t},deleteBoard:function(e,t){var r=e.boards.findIndex((function(e){return e._id===t}));e.boards.splice(r,1)},addNewBoard:function(e,t){e.boards.push(t)},updateBoard:function(e,t){var r=t.board;e.currBoard=r},setEmptyGroup:function(e){var t=JSON.parse(JSON.stringify(en.emptyGroup()));e.emptyGroup=t}},actions:{loadBoards:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,en.query();case 3:n=t.sent,r("setBoards",n);case 5:case"end":return t.stop()}}),t)})))()},loadBoard:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.commit,a=t.boardId,a){r.next=6;break}s=null,r.next=9;break;case 6:return r.next=8,en.getById(a);case 8:s=r.sent;case 9:n({type:"updateBoard",board:s});case 10:case"end":return r.stop()}}),r)})))()},updateBoard:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.board,n({type:"updateBoard",board:a}),r.next=5,en.save(a);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r)})))()},deleteBoard:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,en.remove(t);case 3:n({type:"deleteBoard",boardId:t});case 4:case"end":return r.stop()}}),r)})))()},createNewBoard:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=en.emptyBoard(),a=e.getters.loggedinUser,n.title=t,"guest"===a._id?n.isPrivate=!1:(n.byMember=a,n.members.push(a)),s=en.emptyActivity(),s.byMember=a,s.createdAt=Date.now(),s.txt="created the board",delete s.card,n.activities.push(s),r.next=12,en.save(n);case 12:return o=r.sent,e.commit("addNewBoard",o),r.abrupt("return",o);case 15:case"end":return r.stop()}}),r)})))()}}},ln={state:{currCard:null,emptyCard:null},getters:{currCard:function(e){return e.currCard},emptyCard:function(e){return e.emptyCard},activities:function(e){return e.currCard.activities}},mutations:{setCurrCard:function(e,t){var r=t.cardId;this.getters.currBoard.groups.forEach((function(t){var n=t.cards.find((function(e){return e.id===r}));n&&(e.currCard=n)}))},updateCurrCard:function(e,t){var r=t.card;e.currCard=r},setEmptyCard:function(e){var t=JSON.parse(JSON.stringify(en.emptyCard()));console.log("card:",t),e.emptyCard=t},updateCardStatus:function(e,t){var r=t.status;if(console.log(r),!(r.startGroup===r.endGroup&&r.endPos===r.startPos||r.startGroup===r.endGroup&&!r.endPos&&0!==r.endPos)){console.log("moving");var n=this.getters.currBoard,a=n.groups.findIndex((function(e){return e.id===r.startGroup}));n.groups[a].cards.splice(r.startPos,1);var s=n.groups.findIndex((function(e){return e.id===r.endGroup}));r.endPos||0===r.endPos?n.groups[s].cards.splice(r.endPos,0,e.currCard):n.groups[s].cards.push(e.currCard)}}},actions:{}},pn=r("2f62");n["default"].use(pn["a"]);var fn=new pn["a"].Store({state:{},mutations:{},actions:{},modules:{boardStore:dn,userStore:Zr,cardStore:ln}}),mn=(r("3c61"),r("5c96")),hn=r.n(mn),gn=(r("0fae"),r("b2d6")),bn=r.n(gn),vn=r("5b6c"),Cn=r.n(vn);n["default"].use(Cn.a),n["default"].use(hn.a,{locale:bn.a}),n["default"].config.productionTip=!1,new n["default"]({router:Or,store:fn,render:function(e){return e(g)}}).$mount("#app")},5882:function(e,t,r){e.exports=r.p+"img/bg3.2879accc.jpg"},7387:function(e,t,r){e.exports=r.p+"img/bg5.6abc4d89.jpg"},"7b78":function(e,t,r){e.exports=r.p+"img/bg4.b15bd4da.jpg"},"8dd1":function(e,t,r){"use strict";var n=r("3edc"),a=r.n(n);t["default"]=a.a},fa43:function(e,t,r){e.exports=r.p+"img/bg1.4094cab1.jpg"}});
//# sourceMappingURL=app.99ad5f90.js.map